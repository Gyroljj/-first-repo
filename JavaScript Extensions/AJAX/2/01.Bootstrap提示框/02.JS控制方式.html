<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bootstrap 弹框</title>
    <!-- 引入bootstrap.css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- 
    目标：使用JS控制弹框，显示和隐藏
    1. 创建弹框对象
    2. 调用弹框对象内置方法
      .show() 显示
      .hide() 隐藏
   -->
    <button type="button" class="btn btn-primary edit-btn">编辑姓名</button>

    <div class="modal name-box" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">请输入姓名</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form action="">
              <span>姓名：</span>
              <input type="text" class="username" />
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button type="button" class="btn btn-primary save-btn">保存</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 引入bootstrap.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>
    <script>
      // 1. 生成实例对象 new bootstrap.Modal(dom)
      const modalDom = document.querySelector(".name-box");
      const myModal = new bootstrap.Modal(modalDom);
      // 2. 调用实例对象的属性和方法
      // myModal.show() 打开
      // myModal.hide() 关闭

      // 1.1 打开模态框后修改title内容
      document.querySelector(".edit-btn").addEventListener("click", (e) => {
        // 修改title的内容
        document.querySelector(".modal-title").innerHTML = "编辑姓名";
        // 在打开之前干某些事情
        myModal.show();
      });
      // 1.2 点击保存按钮,关闭弹框,并获取输入框的值
      document.querySelector(".save-btn").addEventListener("click", (e) => {
        console.log(document.querySelector(".username").value);
        myModal.hide();
        document.querySelector(".username").value = "";
      });
      /* 总结
      1. 通过属性控制, 弹框显示或隐藏  => 单纯的显示和隐藏
      2. 通过 JS 控制，弹框显示或隐藏 => 可以添加额外的逻辑代码
    */
    </script>
  </body>
</html>
